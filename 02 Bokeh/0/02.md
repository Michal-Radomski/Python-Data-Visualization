To use Bokeh's `bokeh serve your_script.py` command in a virtual environment on Ubuntu, first set up a clean environment and
install Bokeh, then create a server-compatible script.[1]

## Setup Virtual Environment

Create and activate a virtual environment with Python 3 (Ubuntu typically has it pre-installed). Run these commands in your
terminal:

- `python3 -m venv bokeh_env`
- `source bokeh_env/bin/activate`
- `pip install bokeh` (this installs the latest version, currently around 3.4.x)[1]

Ensure your system has `nodejs` and `npm` for Bokeh's JavaScript assets: `sudo apt update && sudo apt install nodejs npm`.[1]

## Example Bokeh Script

Save this as `your_script.py`. It creates an interactive slider-updating plot, required for `bokeh serve` (scripts must
define a `main` document function or use `curdoc()`).

```python
from bokeh.plotting import figure, curdoc
from bokeh.layouts import column
from bokeh.models import Slider
import numpy as np

# Sample data
x = np.linspace(0, 10, 500)
y = np.sin(x)

# Plot
p = figure(height=400, width=600, title="Interactive Sine Wave")
r = p.line(x, y, line_width=2, line_color="navy")

# Slider
slider = Slider(start=0.1, end=10, value=1, step=0.1, title="Frequency")

# Callback
def update(attr, old, new):
    y_new = np.sin(slider.value * x)
    r.data_source.data['y'] = y_new

slider.on_change('value', update)

# Layout
layout = column(slider, p)
curdoc().add_root(layout)
```

This uses `curdoc()` to add roots to Bokeh's Document for server rendering.[2][1]

## Running the Server

With the virtual environment activated, run `bokeh serve your_script.py`. The app starts at
`http://localhost:5006/your_script` (port 5006 by default). Add `--show` to auto-open your browser:
`bokeh serve your_script.py --show`.[3][1]

Keep the terminal open; press Ctrl+C to stop. For production, consider `--allow-websocket-origin=*` if accessing remotely.[1]

[1](https://docs.bokeh.org/en/2.4.2/docs/reference/command/subcommands/serve.html)
[2](https://docs.bokeh.org/en/latest/docs/reference/command/subcommands/serve.html)
[3](https://docs.bokeh.org/en/3.4.2/docs/reference/command/subcommands/serve.html)
[4](https://docs.bokeh.org/en/3.2.0/docs/reference/command/subcommands/serve.html)
[5](https://stackoverflow.com/questions/40156912/pass-command-line-arguments-to-bokeh-server-application)
[6](https://stackoverflow.com/questions/41570318/debugging-bokeh-serve-application-using-pycharm)
[7](https://panel.holoviz.org/how_to/server/commandline.html)
[8](https://docs.bokeh.org/en/2.4.2/docs/user_guide/server.html)
[9](https://stackoverflow.com/questions/54028698/running-a-bokeh-server)
[10](https://dev.to/codesphere/deploying-web-based-data-visualizations-with-bokeh-in-python-4ai8)
